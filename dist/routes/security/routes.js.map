{"version":3,"sources":["../../../src/routes/security/routes.js"],"names":["security","app","controller","routes","post","req","res","username","get","password","user","verifyUser","validUser","login","token","status","send","message","module","exports"],"mappings":";;;;AAAA,SAASA,QAAT,CAAkBC,GAAlB,EAAuB;AACtB,KAAMC,aAAaD,IAAIE,MAAJ,CAAWH,QAAX,CAAoBE,UAAvC;;AAEAD,KAAIG,IAAJ,CAAS,YAAT;AAAA,qEAAuB,iBAAgBC,GAAhB,EAAqBC,GAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAElBC,eAFkB,GAEPF,IAAIG,GAAJ,CAAQ,UAAR,CAFO;AAGlBC,eAHkB,GAGPJ,IAAIG,GAAJ,CAAQ,UAAR,CAHO;AAMhBE,WANgB,GAMT;AACZH,kBAAUA,QADE;AAEZE,kBAAUA;AAFE,QANS;AAAA;AAAA;AAAA,cAYGP,WAAWS,UAAX,CAAsBD,IAAtB,CAZH;;AAAA;AAYfE,gBAZe;;AAAA,YAalBA,SAbkB;AAAA;AAAA;AAAA;;AAAA;AAAA,cAcAV,WAAWW,KAAX,CAAiBH,IAAjB,CAdA;;AAAA;AAcdI,YAdc;;AAepBR,WAAIS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAACF,YAAD,EAArB;AAfoB;AAAA;;AAAA;AAiBpBR,WAAIS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,cAArB;;AAjBoB;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAoBrBV,WAAIS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,YAAIC,OAAzB;;AApBqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvB;;AAAA;AAAA;AAAA;AAAA;AAwBA;;AAEDC,OAAOC,OAAP,GAAiBnB,QAAjB","file":"routes.js","sourcesContent":["function security(app) {\n\tconst controller = app.routes.security.controller;\n\n\tapp.post('/api/login', async function (req, res) {\n\n\t\tlet username = req.get('username');\n\t\tlet password = req.get('password');\n\t\n\n\t\tconst user = {\n\t\t\tusername: username,\n\t\t\tpassword: password\n\t\t};\n\n\t\ttry{\n\t\t\tconst validUser = await controller.verifyUser(user);\n\t\t\tif(validUser){\n\t\t\t\tconst token = await controller.login(user);\n\t\t\t\tres.status(200).send({token});\n\t\t\t} else {\n\t\t\t\tres.status(400).send('Invalid user');\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tres.status(400).send(err.message);\n\t\t}\n\n\t});\n}\n\nmodule.exports = security;"]}